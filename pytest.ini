[pytest]
# Pytest配置文件

# 测试路径
testpaths = tests

# 最小版本要求
minversion = 7.0

# Python文件模式
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 命令行参数
addopts =
    # 详细输出
    -ra
    -v
    # 显示测试覆盖率
    --cov=core
    --cov=web/backend
    # 覆盖率报告格式
    --cov-report=html:htmlcov
    --cov-report=term-missing
    # 覆盖率最低要求（建议80%，当前设为60%以便渐进提升）
    --cov-fail-under=60
    # 显示最慢的10个测试
    --durations=10

# Python路径
pythonpath = .

# 标记定义
markers =
    unit: 单元测试
    integration: 集成测试
    slow: 慢速测试
    billing: 账单相关测试
    api: API测试
    database: 数据库测试
