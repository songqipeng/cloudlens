# CloudLens AWSéƒ¨ç½²å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. Gitä»£ç åŒæ­¥
- **çŠ¶æ€**: æœ¬åœ°æœ‰3ä¸ªæœªæ¨é€çš„æäº¤
- **æ“ä½œ**: å·²æäº¤terraformé…ç½®å¹¶æ¨é€åˆ°GitHub
- **ä»“åº“**: https://github.com/songqipeng/cloudlens.git

### 2. SSHè¿æ¥ä¿®å¤
- **çŠ¶æ€**: âœ… SSHè¿æ¥æ­£å¸¸
- **å¯†é’¥ä½ç½®**: `~/.ssh/cloudlens-key`
- **æƒé™**: å·²ä¿®å¤ä¸º600
- **æµ‹è¯•**: è¿æ¥æˆåŠŸï¼Œå¯ä»¥æ‰§è¡Œå‘½ä»¤

### 3. éƒ¨ç½²çŠ¶æ€

**å®ä¾‹ä¿¡æ¯**:
- **å®ä¾‹ID**: `i-0ee12b47cdb5ca60d`
- **å…¬ç½‘IP**: `54.248.170.40`
- **åŒºåŸŸ**: `ap-northeast-1` (ä¸œäº¬)
- **SSHå‘½ä»¤**: `ssh -i ~/.ssh/cloudlens-key ec2-user@54.248.170.40`

**å·²ä¿®å¤çš„é—®é¢˜**:
1. âœ… user-dataè„šæœ¬ä¸­çš„yumåŒ…å†²çªï¼ˆæ·»åŠ `--skip-broken`å‚æ•°ï¼‰
2. âœ… ç¼ºå°‘gitå·¥å…·ï¼ˆåœ¨éƒ¨ç½²è„šæœ¬ä¸­å®‰è£…ï¼‰
3. âœ… SSHå¯†é’¥æƒé™é—®é¢˜ï¼ˆå·²ä¿®å¤ä¸º600ï¼‰

**éƒ¨ç½²æ­¥éª¤**:
1. å®‰è£…gitå’ŒDocker Compose
2. å…‹éš†ä»£ç ä»GitHub
3. é…ç½®ç¯å¢ƒå˜é‡
4. æ‹‰å–Dockeré•œåƒ
5. å¯åŠ¨Docker ComposeæœåŠ¡

## ğŸ“ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. éªŒè¯æœåŠ¡çŠ¶æ€
```bash
# SSHåˆ°å®ä¾‹
ssh -i ~/.ssh/cloudlens-key ec2-user@54.248.170.40

# æ£€æŸ¥æœåŠ¡
cd /opt/cloudlens/app
docker-compose ps
docker-compose logs -f
```

### 2. æ£€æŸ¥æœåŠ¡è®¿é—®
- **å‰ç«¯**: http://54.248.170.40:3000
- **åç«¯å¥åº·æ£€æŸ¥**: http://54.248.170.40:8000/health

### 3. DNSé…ç½®ï¼ˆé‡è¦ï¼‰
åœ¨é˜¿é‡Œäº‘DNSé…ç½®CNAMEè®°å½•ï¼š
- **è®°å½•ç±»å‹**: CNAME
- **ä¸»æœºè®°å½•**: `cloudlens`
- **è®°å½•å€¼**: `cloudlens-alb-1610761068.ap-northeast-1.elb.amazonaws.com`
- **TTL**: 600

**ä¸è¦ä½¿ç”¨Aè®°å½•æŒ‡å‘é™æ€IP**ï¼Œå› ä¸ºALBçš„IPä¼šå˜åŒ–ã€‚

### 4. è®¿é—®åº”ç”¨
é…ç½®DNSåï¼Œè®¿é—®: https://cloudlens.songqipeng.com

## ğŸ”§ æ•…éšœæ’æŸ¥

å¦‚æœæœåŠ¡æ— æ³•è®¿é—®ï¼š

1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**
   ```bash
   ssh -i ~/.ssh/cloudlens-key ec2-user@54.248.170.40
   docker ps
   docker-compose logs
   ```

2. **æ£€æŸ¥ç«¯å£ç›‘å¬**
   ```bash
   sudo netstat -tlnp | grep -E ':(80|443|3000|8000)'
   ```

3. **æ£€æŸ¥å®‰å…¨ç»„**
   - ç¡®ä¿80ã€443ç«¯å£å¯¹å…¬ç½‘å¼€æ”¾
   - ç¡®ä¿3000ã€8000ç«¯å£å¯¹ALBå¼€æ”¾

4. **é‡æ–°éƒ¨ç½²**
   ```bash
   ssh -i ~/.ssh/cloudlens-key ec2-user@54.248.170.40
   cd /opt/cloudlens/app
   docker-compose down
   docker-compose pull
   docker-compose up -d
   ```

## ğŸ“Š èµ„æºä¿¡æ¯

- **ALB DNS**: `cloudlens-alb-1610761068.ap-northeast-1.elb.amazonaws.com`
- **SSLè¯ä¹¦**: å·²é…ç½®ï¼ˆACMï¼‰
- **Route 53**: å·²åˆ›å»ºæ‰˜ç®¡åŒºåŸŸï¼ˆç”¨äºè¯ä¹¦éªŒè¯ï¼‰
