# ACK 资源查询问题说明

## 问题描述

ACK（容器服务 Kubernetes 版）资源查询返回 404 错误，可能的原因：

1. **API 权限问题**：当前账户的 API 凭证可能没有查询 ACK 资源的权限
2. **API 版本问题**：使用的 API 版本（2015-12-15）可能已过期
3. **服务未开通**：账户可能未开通容器服务 ACK

## 解决方案

### 方案 1: 检查 API 权限

请确认您的 RAM 用户/角色具有以下权限：
- `cs:DescribeClusters` - 查询集群列表
- `cs:GetClusters` - 获取集群详情

### 方案 2: 使用新的 API 版本

如果 API 版本已更新，可能需要使用更新的版本。请查看阿里云官方文档获取最新 API 版本。

### 方案 3: 通过 ECS 标签识别 ACK 节点

如果 API 调用失败，可以通过查询 ECS 实例的标签来识别 ACK 节点：
- 标签键：`ack.aliyun.com` 或 `ack.alibabacloud.com/nodepool-id`
- 这些 ECS 实例属于 ACK 集群的节点

## 当前实现

代码已添加详细的错误处理和日志，当 API 调用失败时会：
1. 记录详细的错误信息
2. 返回空列表（不会导致整个查询失败）
3. 继续查询其他区域

## 测试建议

1. 检查后端日志：`~/.cloudlens/logs/backend.log`
2. 查看是否有 ACK API 相关的错误信息
3. 确认账户权限和 API 凭证

## 临时解决方案

如果 ACK API 无法使用，可以：
1. 暂时隐藏 ACK 资源类型按钮（前端）
2. 或者显示提示信息："ACK 资源查询需要特定权限，请联系管理员"

